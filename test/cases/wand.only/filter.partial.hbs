<filter
  color-interpolation-filters="sRGB"
  id="glowEmboss"
  width="250%"
  height="250%"
  x="-75%"
  y="-55%"
>
  <feGaussianBlur
    in="SourceAlpha"
    result="alphablur"
    stdDeviation="8"
  ></feGaussianBlur>

  {{! <!-- Background glow  --> }}
  <feGaussianBlur
    in="SourceAlpha"
    stdDeviation="30"
    result="glow"
  ></feGaussianBlur>
  <feColorMatrix
    in="glow"
    result="bgGlow"
    type="matrix"
    values="-1 0 0 0 1
            0 -1 0 0 1
            0 0 -1 0 1
            0 0 0 1 0 "
  ></feColorMatrix>

  {{! <!-- Emboss/Bevel --> }}
  {{#each layers}}
    <feTurbulence
      {{#if fractalNoise}}type="fractalNoise"{{/if}}
      baseFrequency="{{uint8 turbFreqX decimals=3}} {{uint8 turbFreqY decimals=3}}"
      numOctaves="{{uint8 turbOct}}"
      seed="1004123123"
      result="turb_{{@index}}"
    ></feTurbulence>
    <feGaussianBlur
      stdDeviation="{{uint8 turbBlur}}"
      in="SourceAlpha"
      result="turb_blur_{{@index}}"
    ></feGaussianBlur>
    <feDisplacementMap
      scale="{{uint8 dispScale}}"
      in="turb_blur_{{@index}}"
      in2="turb_{{@index}}"
      result="disp_turb_{{@index}}"
    ></feDisplacementMap>
    <feColorMatrix
      type="matrix"
      values="0 0 0 0 0,
              0 0 0 0 0,
              0 0 0 0 0,
              0 0 0 1 0"
      in="disp_turb_{{@index}}"
      result="co_mat_{{@index}}"
    ></feColorMatrix>
    <feGaussianBlur
      stdDeviation="{{uint8 blurX}} {{uint8 blurY}}"
      in="co_mat_{{@index}}"
      result="blur_co_mat_{{@index}}"
    ></feGaussianBlur>
    <feSpecularLighting
      surfaceScale="{{uint8 surfaceScale}}"
      specularConstant="{{uint8 specConstant decimals=2}}"
      specularExponent="{{uint8 specExponent}}"
      lighting-color="{{lightColor}}"
      in="blur_co_mat_{{@index}}"
      result="lighting_{{@index}}"
    >
      <fePointLight x="{{int16 pointX}}" y="{{int16 pointY}}" z="{{int16 pointZ}}"></fePointLight>
    </feSpecularLighting>
    <feComposite
      operator="in"
      in="lighting_{{@index}}"
      in2="co_mat_{{@index}}"
      result="comp_light_1_{{@index}}"
    ></feComposite>
    <feComposite
      operator="arithmetic"
      k1="0"
      k2="0"
      k3="{{uint8 opacity decimals=2}}"
      k4="0"
      in="disp_turb_{{@index}}"
      in2="comp_light_1_{{@index}}"
      result="comp_light_2_{{@index}}"
    ></feComposite>
    <feComposite
      operator="in"
      in2="SourceAlpha"
      in="comp_light_2_{{@index}}"
      result="comp_light_final_{{@index}}"
    ></feComposite>

  {{/each}}

  <feMerge>
    <feMergeNode in="bgGlow"></feMergeNode>
    <feMergeNode in="SourceGraphic"></feMergeNode>
    {{#each layers}}
      <feMergeNode in="comp_light_final_{{@index}}"></feMergeNode>
    {{/each}}
  </feMerge>
</filter>