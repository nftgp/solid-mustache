<defs>
  <style>
    .xp-seg {
      fill: green;
    }
    .xp-guide {
      fill: none;
      stroke-width: 1;
      stroke: #FAFFC0;
      opacity: 0.7;
    }
    .xp-bar * {
      transform-box: fill-box;
      transform-origin: center;
    }
    .xp-start {
      fill: white;
    }
    .xp-fill {
      fill: none;
      stroke-width: 28;
      stroke: url(#xp-grad);
      opacity: 1;
      mix-blend-mode: plus-lighter;
    }
    .hilt rect {
      fill: url(#hilt-grad);
    }

    #bar-base {
      stroke-dasharray: calc({{uint32 amount}} / {{uint32 cap}} * 37.2%) 100%;
    }
  </style>
  <symbol id="xp-bar-seg">
    <circle class="xp-circ" cx="1000" cy="1060.25" r="307.97"/>
    <path class="xp-seg" d="M1002.84,768.69c-.95,0-1.9-.01-2.84-.01s-1.9,0-2.84,.01l-.16-16c1,0,2-.01,3-.01s2,0,3,.01l-.16,16Z"/>
  </symbol>
  <linearGradient id="xp-grad" gradientUnits="objectBoundingBox" x1="80%" x2="20%" y1="200%" y2="-400%">
    <stop offset="0" stop-color="black" stop-opacity="1"/>
    <stop offset="0.4" stop-color="lightgreen" stop-opacity="0"/>
  </linearGradient>
  <linearGradient id="hilt-grad" gradientUnits="objectBoundingBox" x1="80%" x2="20%" y1="200%" y2="-400%">
    <stop offset="0" stop-color="black" stop-opacity="1"/>
    <stop offset="0.4" stop-color="lightgreen" stop-opacity="1"/>
  </linearGradient>
</defs>

<circle class="xp-guide" cx="1000" cy="1060.25" r="320"/>
<circle class="xp-guide" cx="1000" cy="1060.25" r="290"/>

<path id="bar-base" d="M1000,1365 a1,1 0 0,0 0,-610" class="xp-fill" stroke-linecap="round">
</path>
<use href="#bar-base" transform="scale(-1,1) translate(-2000,0)"></use>
<g class="hilt" filter="url(#glowEmboss)" id="xp-hilt">
  <rect width="40" height="40" x="980" y="1345" transform="rotate(45, 1000, 1365)"/>
  <rect width="40" height="40" x="980" y="1345" />
</g>
{{#if crown}}
<use href="#xp-hilt" transform="translate(0,-610)"></use>
{{/if}}